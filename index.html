<html>
    <head>
        <style>
            body {font-family: sans-serif; line-height: 1.3; max-width: 600px; padding: 24px; margin: auto}
            pre, code {font-family: "Consolas", monospace}
        </style>
    </head>
    <body>
        <div class="container">
            <h1>Solarpunk</h1>

            <h2>Writing fast K code</h2>

            <p><a href="https://en.wikipedia.org/wiki/Rule_30">Rule 30</a>:</p>
            <pre>
                              #                             
                             ###                            
                            ##  #                           
                           ## ####                          
                          ##  #   #                         
                         ## #### ###                        
                        ##  #    #  #                       
                       ## ####  ######                      
                      ##  #   ###     #                     
                     ## #### ##  #   ###                    
                    ##  #    # #### ##  #                   
                   ## ####  ## #    # ####                  
                  ##  #   ###  ##  ## #   #                 
                 ## #### ##  ### ###  ## ###                
                ##  #    # ###   #  ###  #  #               
               ## ####  ## #  # #####  #######              
              ##  #   ###  #### #    ###      #             
             ## #### ##  ###    ##  ##  #    ###            
            ##  #    # ###  #  ## ### ####  ##  #           
           ## ####  ## #  ######  #   #   ### ####          
          ##  #   ###  ####     #### ### ##   #   #         
         ## #### ##  ###   #   ##    #   # # ### ###        
        ##  #    # ###  # ### ## #  ### ## # #   #  #       
       ## ####  ## #  ### #   #  ####   #  # ## ######      
      ##  #   ###  ####   ## #####   # ##### #  #     #     
     ## #### ##  ###   # ##  #    # ## #     #####   ###    
    ##  #    # ###  # ## # ####  ## #  ##   ##    # ##  #
</pre>
            
            <p>Original:</p>
            <code><pre>
/ left_cell XOR (central_cell OR right_cell)
(r;c):26 60              / rows (iterations), columns
s:(2/c)=!c               / start state
n:{{~x=y|z} .' 3':0,x,0} / next state
` 0: " #" r n\ s;        / iterate, display
</pre></code>
                
                <p>With help from a k expert:</p>
                <code><pre>
/ left_cell XOR (central_cell OR right_cell)
(r;c):26 60              / rows (iterations), columns
s:(2/c)=!c               / start state
n:{~=[0,-1_x; x|1_x,0]}  / next state
` 0: " #" r n\ s;        / iterate, display                                           
</pre></code>
            
            <p>Timing of core calc:</p>
            <code><pre>
(r;c):26 60                                     / rows (iterations), columns
\t:1000 " #" r {{~x=y|z} .' 3':0,x,0}\ (2/c)=!c / 1463
\t:1000 " #" r {~=[0,-1_x; x|1_x,0]}\ (2/c)=!c  / 49
~[r {{~x=y|z} .' 3':0,x,0}\ (2/c)=!c
  r {~=[0,-1_x; x|1_x,0]}\ (2/c)=!c]            / 1
            </pre></code>
          
        </div>
    </body>
</html>
